<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <link rel="stylesheet" type="text/css" href="css/MainStyles.min.css" />
    <script type="text/javascript" src="js/jquery-1.11.3.min.js"></script>
    <meta charset="utf-8" />
    <title></title>

    <script type="text/javascript">
        $(function () {

            $('#romFileSelect').change(function (e) {
                var file = this.files[0];
                var reader = new FileReader();

                reader.onload = function (e) {
                    currentForm.insertRomFile(btoa(this.result));
                }

                reader.readAsBinaryString(file);
            });

            $('#buttonShowDevConsole').click(function () {
                currentForm.showDevTools();
            });

            $('#buttonEmuRun').click(function () {
                currentForm.runEmu();
            });


            /* Register events */
            currentForm.on('cartridge', function (name, serial, crc1, crc2, cic, region) {
                var brTag = '<br />';

                $('#cartrigeInfo').html(
                    ['Name: ', name, brTag,
                    'Serial: ', serial, brTag,
                    'CRC1: ', crc1, brTag,
                    'CRC2: ', crc2, brTag,
                    'CIC: ', cic, brTag,
                    'Region: ', region].join(''));
            });

            currentForm.on('emulog', function (logger, level, message) {
                var logStyle = "logmessage";

                switch (level.toLowerCase())
                {
                    default:
                    case "trace":
                    case "info": break;
                    case "fatal": logStyle = "logmessage_fatal"; break;
                    case "error": logStyle = "logmessage_error"; break;
                    case "warning": logStyle = "logmessage_warning"; break;
                    case "debug": logStyle = "logmessage_debug"; break;
                }

                var output = ['<span class=', logStyle, '>', logger, ': ', message, '</span><br />'].join('');

                $('#emulog').append(output);
            });
        });
    </script>
</head>



<body>
    <input id="buttonShowDevConsole" type='button' value="Show Dev Console" />
    <br />
    <br />
    <input type="button" id="buttonEmuRun" value="Run" />
    <br />
    <b class="sectionHeader">Cartridge Configuration</b>
    <br />
    <div id="cartridgeBox">
        <b>ROM File:</b><input id="romFileSelect" style="margin-left: 5px" type='file' />
        <br />
        <div id="cartrigeInfo">
            No Cartridge Inserted
        </div>
    </div>

    <br />
    <div class="sectionHeader">
        <b>Emulation Log</b>
        <br />
        <div id="emulog">
        </div>
    </div>
</body>
</html>